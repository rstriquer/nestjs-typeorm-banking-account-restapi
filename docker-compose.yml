version: '3.7'
services:
  database:
    image: mysql:5.7
    networks:
      - local-vpc
    environment:
      - MYSQL_DATABASE=${DB_NAME:-url_shortener_dev}
      - MYSQL_USER=${DB_USERNAME:-someuser}
      - MYSQL_PASSWORD=${DB_PASSWORD:-123456}
      - MYSQL_ROOT_PASSWORD=${DB_ROOT_PASSWORD:-some_hard_thing}
      - LANG=C.UTF_8
      - TZ=${DB_TIMEZONE:-UTC}
    volumes:
      - ${DB_DATA_PATH:-./var/docker/mysql}:/var/lib/mysql
      - './config/docker/mysql/dev:/docker-entrypoint-initdb.d'
    ports:
      - '${DB_PORT:-3306}:3306'
    command:
      [
        'mysqld',
        '--character-set-server=utf8mb4',
        '--collation-server=utf8mb4_unicode_ci',
        '--skip-character-set-client-handshake',
      ]
